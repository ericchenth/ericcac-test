#!/usr/bin/env python
# encoding: utf-8
"""
bgp.py

Created by Thomas Mangin on 2009-08-30.
Copyright (c) 2009 Exa Networks. All rights reserved.
"""

import os
import sys

main = int(sys.version[0])
secondary = int(sys.version[2])

if main != 2 or secondary < 5:
	sys.exit('This program is not tested with versions of python before 2.5')

if __name__ == '__main__':
	if len(sys.argv) < 2:
		sys.exit('usage bgpd <configuration file>')
	conf = sys.argv[1]

	from bgp.structure.configuration import Configuration
	from bgp.structure.supervisor import Supervisor

	configuration = Configuration(conf)
	if not configuration.reload():
		sys.exit('%s' % configuration.error)
	supervisor = Supervisor(configuration)
	supervisor.run()
	sys.exit(0)
